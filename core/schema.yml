openapi: 3.0.3
info:
  title: Clash of Code API
  version: 1.0.0
  description: Internal API documentation for the Clash of Code platform. This API
    handles authentication, user profiles, challenges, store purchases, and real-time
    notifications.
paths:
  /api/admin/analytics/challenges/:
    get:
      operationId: admin_analytics_challenges_list
      description: Get detailed challenge performance analytics including completion
        rates and average stars.
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ChallengeAnalytics'
          description: ''
  /api/admin/analytics/store/:
    get:
      operationId: admin_analytics_store_retrieve
      description: Get store economy analytics, item popularity, and total XP revenue.
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreAnalytics'
          description: ''
  /api/admin/audit-logs/:
    get:
      operationId: admin_audit_logs_retrieve
      description: Retrieve administrative action logs with advanced filtering and
        search.
      parameters:
      - in: query
        name: action
        schema:
          type: string
      - in: query
        name: admin
        schema:
          type: string
      - in: query
        name: date_from
        schema:
          type: string
      - in: query
        name: date_to
        schema:
          type: string
      - in: query
        name: ordering
        schema:
          type: string
          default: -timestamp
      - in: query
        name: page
        schema:
          type: integer
          default: 1
      - in: query
        name: page_size
        schema:
          type: integer
          default: 50
      - in: query
        name: search
        schema:
          type: string
      - in: query
        name: target
        schema:
          type: string
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminAuditLogResponse'
          description: ''
  /api/admin/notifications/broadcast/:
    post:
      operationId: admin_notifications_broadcast_create
      description: Broadcast a notification to all active users.
      tags:
      - admin
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GlobalNotificationRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GlobalNotificationRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GlobalNotificationRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/admin/stats/:
    get:
      operationId: admin_stats_retrieve
      description: Get administration statistics including total users, active sessions,
        and economy totals.
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminStats'
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/admin/system/integrity/:
    get:
      operationId: admin_system_integrity_retrieve
      description: Get current collection counts for key system models.
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemIntegrity'
          description: ''
  /api/admin/users/:
    get:
      operationId: admin_users_retrieve
      description: List all users with filtering and pagination. Staff can see all
        non-staff/superuser users; Superusers can see everyone.
      parameters:
      - in: query
        name: page
        schema:
          type: integer
          default: 1
      - in: query
        name: page_size
        schema:
          type: integer
          default: 25
      - in: query
        name: role
        schema:
          type: string
          enum:
          - staff
          - superuser
          - user
      - in: query
        name: search
        schema:
          type: string
      - in: query
        name: status
        schema:
          type: string
          enum:
          - active
          - blocked
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminUserListResponse'
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/admin/users/{username}/delete/:
    delete:
      operationId: admin_users_delete_destroy
      description: Permanently delete a user account. This action cannot be undone.
      parameters:
      - in: query
        name: reason
        schema:
          type: string
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - admin
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/admin/users/{username}/toggle-block/:
    post:
      operationId: admin_users_toggle_block_create
      description: Toggle a user's active status. Blocking a user prevents them from
        logging in.
      parameters:
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - admin
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserBlockRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserBlockRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserBlockRequestRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/admin/login/:
    post:
      operationId: auth_admin_login_create
      description: Authenticate an administrator using username and password.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminLoginRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AdminLoginRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AdminLoginRequest'
        required: true
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/github/:
    get:
      operationId: auth_github_retrieve
      description: Get the GitHub OAuth authorization URL to initiate the login process.
      tags:
      - auth
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OAuthURL'
          description: ''
  /api/auth/github/callback/:
    post:
      operationId: auth_github_callback_create
      description: Exchange GitHub authorization code for JWT tokens and user profile.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OAuthCodeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OAuthCodeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OAuthCodeRequest'
        required: true
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/google/:
    get:
      operationId: auth_google_retrieve
      description: Get the Google OAuth authorization URL to initiate the login process.
      tags:
      - auth
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OAuthURL'
          description: ''
  /api/auth/google/callback/:
    post:
      operationId: auth_google_callback_create
      description: Exchange Google authorization code for JWT tokens and user profile.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OAuthCodeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OAuthCodeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OAuthCodeRequest'
        required: true
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GoogleAuthResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/logout/:
    post:
      operationId: auth_logout_create
      description: Logout the user and clear authentication cookies.
      tags:
      - auth
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/otp/request/:
    post:
      operationId: auth_otp_request_create
      description: Request a One-Time Password (OTP) to be sent to the provided email
        address.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OTPRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OTPRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OTPRequestRequest'
        required: true
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/otp/verify/:
    post:
      operationId: auth_otp_verify_create
      description: Verify the OTP sent to email and receive JWT tokens.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OTPVerifyRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OTPVerifyRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OTPVerifyRequest'
        required: true
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/refresh/:
    post:
      operationId: auth_refresh_create
      description: Refresh the access token using a valid refresh token (from body
        or cookie).
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
        required: true
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshResponse'
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/auth/user/delete/:
    delete:
      operationId: auth_user_delete_destroy
      description: Permanently delete the authenticated user account.
      tags:
      - auth
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/certificates/check_eligibility/:
    get:
      operationId: certificates_check_eligibility_retrieve
      description: Check if the authenticated user is eligible for a certificate.
      tags:
      - certificates
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/certificates/my_certificate/:
    get:
      operationId: certificates_my_certificate_retrieve
      description: Get or generate the authenticated user's completion certificate.
      tags:
      - certificates
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserCertificate'
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/certificates/verify/{certificate_id}/:
    get:
      operationId: certificates_verify_retrieve
      description: Verify a certificate by its unique ID.
      parameters:
      - in: path
        name: certificate_id
        schema:
          type: string
        required: true
      tags:
      - certificates
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CertificateVerificationResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/:
    get:
      operationId: challenges_list
      description: List all available challenges with user-specific progress annotations.
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Challenge'
          description: ''
    post:
      operationId: challenges_create
      description: Create a new challenge (Admin only).
      tags:
      - challenges
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChallengeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChallengeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChallengeRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/{slug}/:
    get:
      operationId: challenges_retrieve
      description: Retrieve details of a specific challenge including user progress
        and purchase status.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
          description: ''
    put:
      operationId: challenges_update
      description: ViewSet for interacting with coding challenges.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChallengeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChallengeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChallengeRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
          description: ''
    patch:
      operationId: challenges_partial_update
      description: ViewSet for interacting with coding challenges.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedChallengeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedChallengeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedChallengeRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
          description: ''
    delete:
      operationId: challenges_destroy
      description: ViewSet for interacting with coding challenges.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '204':
          description: No response body
  /api/challenges/{slug}/ai-analyze/:
    post:
      operationId: challenges_ai_analyze_create
      description: Get AI-powered analysis and feedback for your code.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIAnalysisProxyRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AIAnalysisProxyRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AIAnalysisProxyRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '503':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/{slug}/ai-hint/:
    post:
      operationId: challenges_ai_hint_create
      description: Retrieve an AI-generated hint for the challenge (Requires prior
        purchase of the level).
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIHintProxyRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AIHintProxyRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AIHintProxyRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '402':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '503':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/{slug}/context/:
    get:
      operationId: challenges_context_retrieve
      description: Internal endpoint to fetch full challenge context (Requires INTERNAL_API_KEY).
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeContextResponse'
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/{slug}/purchase_ai_assist/:
    post:
      operationId: challenges_purchase_ai_assist_create
      description: Purchase the next level of AI assistance for this challenge using
        XP.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIAssistPurchaseResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '402':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/{slug}/submit/:
    post:
      operationId: challenges_submit_create
      description: Submit a challenge solution and update user progress.
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChallengeSubmissionRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChallengeSubmissionRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChallengeSubmissionRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/internal-list/:
    get:
      operationId: challenges_internal_list_list
      description: Internal endpoint to list all challenges for indexing (Requires
        INTERNAL_API_KEY).
      tags:
      - challenges
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Challenge'
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/challenges/leaderboard/:
    get:
      operationId: challenges_leaderboard_list
      description: Get global leaderboard data (limited to top 100 users, cached for
        30s).
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LeaderboardEntry'
          description: ''
  /api/notifications/:
    get:
      operationId: notifications_list
      description: ViewSet for managing user notifications.
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
          description: ''
  /api/notifications/{id}/:
    get:
      operationId: notifications_retrieve
      description: ViewSet for managing user notifications.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
    delete:
      operationId: notifications_destroy
      description: ViewSet for managing user notifications.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '204':
          description: No response body
  /api/notifications/{id}/mark_read/:
    post:
      operationId: notifications_mark_read_create
      description: Mark a specific notification as read.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/notifications/clear_all/:
    delete:
      operationId: notifications_clear_all_destroy
      description: Delete all notifications for the authenticated user.
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '204':
          description: No response body
  /api/notifications/fcm-tokens/:
    post:
      operationId: notifications_fcm_tokens_create
      description: Register or update an FCM token for the authenticated user.
      tags:
      - notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FCMTokenRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FCMTokenRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FCMTokenRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FCMToken'
          description: ''
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FCMToken'
          description: ''
  /api/notifications/mark_all_read/:
    post:
      operationId: notifications_mark_all_read_create
      description: Mark all notifications as read for the authenticated user.
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/payments/create-order/:
    post:
      operationId: payments_create_order_create
      description: Create a Razorpay order to buy an XP package.
      tags:
      - payments
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '503':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/payments/verify-payment/:
    post:
      operationId: payments_verify_payment_create
      description: Verify a completed Razorpay payment and credit XP to the user.
      tags:
      - payments
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyPaymentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/VerifyPaymentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/VerifyPaymentRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyPaymentResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/posts/:
    get:
      operationId: posts_list
      description: ViewSet for viewing and editing posts.
      tags:
      - posts
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Post'
          description: ''
    post:
      operationId: posts_create
      description: ViewSet for viewing and editing posts.
      tags:
      - posts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PostRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PostRequest'
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
          description: ''
  /api/posts/{id}/:
    get:
      operationId: posts_retrieve
      description: ViewSet for viewing and editing posts.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this post.
        required: true
      tags:
      - posts
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
          description: ''
    put:
      operationId: posts_update
      description: ViewSet for viewing and editing posts.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this post.
        required: true
      tags:
      - posts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PostRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PostRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
          description: ''
    patch:
      operationId: posts_partial_update
      description: ViewSet for viewing and editing posts.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this post.
        required: true
      tags:
      - posts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedPostRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedPostRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedPostRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
          description: ''
    delete:
      operationId: posts_destroy
      description: ViewSet for viewing and editing posts.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this post.
        required: true
      tags:
      - posts
      security:
      - JWTAuth: []
      responses:
        '204':
          description: No response body
  /api/posts/{id}/like/:
    post:
      operationId: posts_like_create
      description: Toggle like/unlike on a specific post.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this post.
        required: true
      tags:
      - posts
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostLikeResponse'
          description: ''
  /api/profiles/user/:
    get:
      operationId: profiles_user_retrieve
      description: Get the currently authenticated user.
      tags:
      - profiles
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
  /api/profiles/user/redeem-referral/:
    post:
      operationId: profiles_user_redeem_referral_create
      description: Redeem a referral code to earn XP.
      tags:
      - profiles
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RedeemReferralRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RedeemReferralRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RedeemReferralRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/profiles/user/update/:
    patch:
      operationId: profiles_user_update_partial_update
      description: Update current user profile and identity details.
      tags:
      - profiles
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUserRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUserRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUserRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
  /api/profiles/users/{username}/:
    get:
      operationId: profiles_users_retrieve
      description: Get public profile details by username.
      parameters:
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - profiles
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/profiles/users/{username}/follow/:
    post:
      operationId: profiles_users_follow_create
      description: Toggle follow/unfollow for a user.
      parameters:
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - profiles
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FollowToggleResponseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FollowToggleResponseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FollowToggleResponseRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FollowToggleResponse'
          description: ''
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FollowToggleResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/profiles/users/{username}/followers/:
    get:
      operationId: profiles_users_followers_retrieve
      description: View to get list of followers for a user.
      parameters:
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - profiles
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserSummary'
          description: ''
  /api/profiles/users/{username}/following/:
    get:
      operationId: profiles_users_following_retrieve
      description: View to get list of users a user is following.
      parameters:
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - profiles
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserSummary'
          description: ''
  /api/profiles/users/{username}/stats/contributions/:
    get:
      operationId: profiles_users_stats_contributions_list
      description: Retrieve a map of daily contributions (completed challenges) for
        the last 365 days.
      parameters:
      - in: path
        name: username
        schema:
          type: string
        required: true
      tags:
      - profiles
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ContributionHistoryResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/profiles/users/suggestions/:
    get:
      operationId: profiles_users_suggestions_retrieve
      description: View to get suggested users to follow.
      tags:
      - profiles
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserSummary'
          description: ''
  /api/rewards/check-in/:
    get:
      operationId: rewards_check_in_retrieve
      description: Get user's check-in status and history for the current cycle.
      tags:
      - rewards
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckInStatus'
          description: ''
    post:
      operationId: rewards_check_in_create
      description: Process a daily check-in and award XP.
      tags:
      - rewards
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckInSuccess'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/store/buy/{id}/:
    post:
      operationId: store_buy_create
      description: Purchase a store item using user's accumulated XP.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - store
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/store/equip/:
    post:
      operationId: store_equip_create
      description: Equip a purchased cosmetic item (Theme, Font, Effect, Victory animation).
      tags:
      - store
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EquipItemRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/EquipItemRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/EquipItemRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/store/items/:
    get:
      operationId: store_items_list
      description: ViewSet for managing store items (Themes, Fonts, Effects, etc.).
      tags:
      - store
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StoreItem'
          description: ''
    post:
      operationId: store_items_create
      description: ViewSet for managing store items (Themes, Fonts, Effects, etc.).
      tags:
      - store
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StoreItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StoreItemRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreItem'
          description: ''
  /api/store/items/{id}/:
    get:
      operationId: store_items_retrieve
      description: ViewSet for managing store items (Themes, Fonts, Effects, etc.).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this store item.
        required: true
      tags:
      - store
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreItem'
          description: ''
    put:
      operationId: store_items_update
      description: ViewSet for managing store items (Themes, Fonts, Effects, etc.).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this store item.
        required: true
      tags:
      - store
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StoreItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StoreItemRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreItem'
          description: ''
    patch:
      operationId: store_items_partial_update
      description: ViewSet for managing store items (Themes, Fonts, Effects, etc.).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this store item.
        required: true
      tags:
      - store
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedStoreItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedStoreItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedStoreItemRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreItem'
          description: ''
    delete:
      operationId: store_items_destroy
      description: ViewSet for managing store items (Themes, Fonts, Effects, etc.).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this store item.
        required: true
      tags:
      - store
      security:
      - JWTAuth: []
      responses:
        '204':
          description: No response body
  /api/store/purchased/:
    get:
      operationId: store_purchased_retrieve
      description: Get a list of all purchased items and the currently equipped cosmetics.
      tags:
      - store
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasedItemsResponse'
          description: ''
  /api/store/unequip/:
    post:
      operationId: store_unequip_create
      description: Reset a cosmetic category to its default value.
      tags:
      - store
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnequipItemRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UnequipItemRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UnequipItemRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/store/upload/:
    post:
      operationId: store_upload_create
      description: Upload an image asset for store items (Admin only).
      tags:
      - store
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImageUploadRequestRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImageUploadResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/tasks/{task_id}/status/:
    get:
      operationId: tasks_status_retrieve
      description: Check the status and result of a specific Celery task by its unique
        ID.
      parameters:
      - in: path
        name: task_id
        schema:
          type: string
        required: true
      tags:
      - tasks
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskStatusResponse'
          description: ''
  /api/tasks/results/:
    get:
      operationId: tasks_results_retrieve
      description: Retrieve a list of recent task results stored in the database,
        with optional filtering by status or task name.
      parameters:
      - in: query
        name: limit
        schema:
          type: integer
          default: 25
      - in: query
        name: status
        schema:
          type: string
      - in: query
        name: task_name
        schema:
          type: string
      tags:
      - tasks
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskResultsListResponse'
          description: ''
  /health/:
    get:
      operationId: health_retrieve
      description: Check the health of the core service (DB, Cache, Redis).
      tags:
      - health
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '503':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
components:
  schemas:
    AIAnalysisProxyRequestRequest:
      type: object
      properties:
        user_code:
          type: string
          minLength: 1
      required:
      - user_code
    AIAssistPurchaseResponse:
      type: object
      properties:
        status:
          type: string
        remaining_xp:
          type: integer
        hints_purchased:
          type: integer
        cost:
          type: integer
        message:
          type: string
      required:
      - cost
      - hints_purchased
      - message
      - remaining_xp
      - status
    AIHintProxyRequestRequest:
      type: object
      properties:
        user_code:
          type: string
          minLength: 1
        hint_level:
          type: integer
      required:
      - hint_level
      - user_code
    AdminAuditLog:
      type: object
      properties:
        admin:
          type: string
          readOnly: true
        action:
          type: string
          maxLength: 255
        target:
          type: string
          readOnly: true
        details: {}
        timestamp:
          type: string
          format: date-time
          readOnly: true
        request_id:
          type: string
          maxLength: 64
        actor_ip:
          type: string
          nullable: true
      required:
      - action
      - admin
      - target
      - timestamp
    AdminAuditLogResponse:
      type: object
      properties:
        count:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
        total_pages:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/AdminAuditLog'
      required:
      - count
      - page
      - page_size
      - results
      - total_pages
    AdminLoginRequest:
      type: object
      description: |-
        Dedicated serializer for admin-only authentication.
        Explicitly blocks non-staff users even with valid credentials.
      properties:
        username:
          type: string
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    AdminStats:
      type: object
      properties:
        total_users:
          type: integer
        active_sessions:
          type: integer
        oauth_logins:
          type: integer
        total_gems:
          type: integer
      required:
      - active_sessions
      - oauth_logins
      - total_gems
      - total_users
    AdminUserListResponse:
      type: object
      properties:
        count:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
        total_pages:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/User'
      required:
      - count
      - page
      - page_size
      - results
      - total_pages
    AuthResponse:
      type: object
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        user:
          $ref: '#/components/schemas/User'
      required:
      - access_token
      - refresh_token
      - user
    CertificateVerificationResponse:
      type: object
      properties:
        valid:
          type: boolean
        certificate:
          allOf:
          - $ref: '#/components/schemas/UserCertificate'
          nullable: true
      required:
      - certificate
      - valid
    Challenge:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          maxLength: 200
        slug:
          type: string
          maxLength: 50
          pattern: ^[-a-zA-Z0-9_]+$
        description:
          type: string
          description: Markdown supported problem description
        initial_code:
          type: string
          description: Starter code for the user
        test_code:
          type: string
          description: Hidden python code to assert the user solution
        order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Order in the campaign level map
        xp_reward:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        time_limit:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Suggested time in seconds for bonus
      required:
      - description
      - id
      - initial_code
      - slug
      - test_code
      - title
    ChallengeAnalytics:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        completions:
          type: integer
        completion_rate:
          type: number
          format: double
        avg_stars:
          type: number
          format: double
        is_personalized:
          type: boolean
      required:
      - avg_stars
      - completion_rate
      - completions
      - id
      - is_personalized
      - title
    ChallengeContextResponse:
      type: object
      properties:
        challenge_title:
          type: string
        description:
          type: string
        initial_code:
          type: string
        test_code:
          type: string
      required:
      - challenge_title
      - description
      - initial_code
      - test_code
    ChallengeRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        slug:
          type: string
          minLength: 1
          maxLength: 50
          pattern: ^[-a-zA-Z0-9_]+$
        description:
          type: string
          minLength: 1
          description: Markdown supported problem description
        initial_code:
          type: string
          minLength: 1
          description: Starter code for the user
        test_code:
          type: string
          minLength: 1
          description: Hidden python code to assert the user solution
        order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Order in the campaign level map
        xp_reward:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        time_limit:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Suggested time in seconds for bonus
        created_for_user_id:
          type: integer
          writeOnly: true
      required:
      - description
      - initial_code
      - slug
      - test_code
      - title
    ChallengeSubmissionRequestRequest:
      type: object
      properties:
        passed:
          type: boolean
      required:
      - passed
    CheckInStatus:
      type: object
      properties:
        checked_in_today:
          type: boolean
        cycle_day:
          type: integer
        today_checkin:
          allOf:
          - $ref: '#/components/schemas/DailyCheckIn'
          nullable: true
        recent_checkins:
          type: array
          items:
            $ref: '#/components/schemas/DailyCheckIn'
      required:
      - checked_in_today
      - cycle_day
      - recent_checkins
      - today_checkin
    CheckInSuccess:
      type: object
      properties:
        message:
          type: string
        check_in:
          $ref: '#/components/schemas/DailyCheckIn'
        xp_earned:
          type: integer
        total_xp:
          type: integer
        cycle_day:
          type: integer
      required:
      - check_in
      - cycle_day
      - message
      - total_xp
      - xp_earned
    ContributionHistoryResponse:
      type: object
      properties:
        date:
          type: string
          format: date
        count:
          type: integer
      required:
      - count
      - date
    CreateOrderRequest:
      type: object
      properties:
        amount:
          type: integer
          minimum: 1
          description: Amount in INR (e.g. 49, 99, 199).
      required:
      - amount
    DailyCheckIn:
      type: object
      description: |-
        Serializer for the DailyCheckIn model.
        Used to return confirmation of successful check-ins and history.
      properties:
        id:
          type: integer
          readOnly: true
        check_in_date:
          type: string
          format: date
          readOnly: true
        streak_day:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        xp_earned:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - check_in_date
      - created_at
      - id
    EquipItemRequestRequest:
      type: object
      properties:
        item_id:
          type: integer
      required:
      - item_id
    FCMToken:
      type: object
      properties:
        token:
          type: string
        device_id:
          type: string
          nullable: true
          maxLength: 255
      required:
      - token
    FCMTokenRequest:
      type: object
      properties:
        token:
          type: string
          minLength: 1
        device_id:
          type: string
          nullable: true
          maxLength: 255
      required:
      - token
    FollowToggleResponse:
      type: object
      properties:
        is_following:
          type: boolean
        follower_count:
          type: integer
        following_count:
          type: integer
      required:
      - follower_count
      - following_count
      - is_following
    FollowToggleResponseRequest:
      type: object
      properties:
        is_following:
          type: boolean
        follower_count:
          type: integer
        following_count:
          type: integer
      required:
      - follower_count
      - following_count
      - is_following
    GlobalNotificationRequestRequest:
      type: object
      properties:
        message:
          type: string
          minLength: 1
          maxLength: 500
        include_staff:
          type: boolean
          default: false
        reason:
          type: string
          minLength: 1
      required:
      - message
    GoogleAuthResponse:
      type: object
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        user:
          $ref: '#/components/schemas/User'
      required:
      - access_token
      - refresh_token
      - user
    ImageUploadRequestRequest:
      type: object
      properties:
        image:
          type: string
          format: binary
      required:
      - image
    ImageUploadResponse:
      type: object
      properties:
        url:
          type: string
      required:
      - url
    LeaderboardEntry:
      type: object
      properties:
        username:
          type: string
        avatar:
          type: string
          format: uri
          nullable: true
        completed_levels:
          type: integer
        xp:
          type: integer
      required:
      - avatar
      - completed_levels
      - username
      - xp
    Notification:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        actor:
          allOf:
          - $ref: '#/components/schemas/UserSummary'
          readOnly: true
        verb:
          type: string
          maxLength: 255
        target_preview:
          type: string
          format: uri
          readOnly: true
        is_read:
          type: boolean
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - actor
      - created_at
      - id
      - target_preview
      - verb
    OAuthCodeRequest:
      type: object
      description: Serializer for OAuth callback receiving an authorization code.
      properties:
        code:
          type: string
          minLength: 1
          description: Authorization code from the provider.
      required:
      - code
    OAuthURL:
      type: object
      description: Serializer for returning the OAuth authorization URL.
      properties:
        url:
          type: string
          format: uri
          description: Redirect URL for OAuth provider.
      required:
      - url
    OTPRequestRequest:
      type: object
      description: |-
        Validator for OTP request payload.
        Ensures email is provided and valid.
      properties:
        email:
          type: string
          format: email
          minLength: 1
      required:
      - email
    OTPVerifyRequest:
      type: object
      description: |-
        Validator for OTP verification payload.
        Requires both email and a 6-digit OTP code.
      properties:
        email:
          type: string
          format: email
          minLength: 1
        otp:
          type: string
          minLength: 6
          maxLength: 6
      required:
      - email
      - otp
    OrderResponse:
      type: object
      properties:
        order_id:
          type: string
        amount:
          type: integer
        key:
          type: string
        xp_amount:
          type: integer
      required:
      - amount
      - key
      - order_id
      - xp_amount
    PatchedChallengeRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        slug:
          type: string
          minLength: 1
          maxLength: 50
          pattern: ^[-a-zA-Z0-9_]+$
        description:
          type: string
          minLength: 1
          description: Markdown supported problem description
        initial_code:
          type: string
          minLength: 1
          description: Starter code for the user
        test_code:
          type: string
          minLength: 1
          description: Hidden python code to assert the user solution
        order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Order in the campaign level map
        xp_reward:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        time_limit:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Suggested time in seconds for bonus
        created_for_user_id:
          type: integer
          writeOnly: true
    PatchedPostRequest:
      type: object
      properties:
        image:
          type: string
          format: binary
          writeOnly: true
        caption:
          type: string
    PatchedStoreItemRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        cost:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Cost in XP
        icon_name:
          type: string
          minLength: 1
          description: Lucide icon name or image path identifier
          maxLength: 50
        category:
          $ref: '#/components/schemas/StoreItemCategoryEnum'
        image:
          type: string
          nullable: true
          description: Path to image in public folder (e.g. /store/dracula.png)
          maxLength: 255
        item_data:
          description: JSON data for functional items (e.g., theme_key)
    PatchedUserRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        is_staff:
          type: boolean
          title: Staff status
          description: Designates whether the user can log into this admin site.
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        is_active:
          type: boolean
          title: Active
          description: Designates whether this user should be treated as active. Unselect
            this instead of deleting accounts.
    Post:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/UserSummary'
          readOnly: true
        image_url:
          type: string
          format: uri
          readOnly: true
        caption:
          type: string
        created_at:
          type: string
          format: date-time
          readOnly: true
        likes_count:
          type: integer
          readOnly: true
        is_liked:
          type: boolean
          readOnly: true
      required:
      - created_at
      - id
      - image_url
      - is_liked
      - likes_count
      - user
    PostLikeResponse:
      type: object
      properties:
        is_liked:
          type: boolean
        likes_count:
          type: integer
      required:
      - is_liked
      - likes_count
    PostRequest:
      type: object
      properties:
        image:
          type: string
          format: binary
          writeOnly: true
        caption:
          type: string
    ProviderEnum:
      enum:
      - github
      - google
      - discord
      - email
      - local
      type: string
      description: |-
        * `github` - GitHub
        * `google` - Google
        * `discord` - Discord
        * `email` - Email OTP
        * `local` - Local/Admin
    PurchaseResponse:
      type: object
      properties:
        status:
          type: string
        message:
          type: string
        remaining_xp:
          type: integer
        item:
          $ref: '#/components/schemas/StoreItem'
      required:
      - item
      - message
      - remaining_xp
      - status
    PurchasedItemsResponse:
      type: object
      properties:
        purchased_items:
          type: array
          items:
            $ref: '#/components/schemas/StoreItem'
        equipped_items:
          type: object
          additionalProperties: {}
      required:
      - equipped_items
      - purchased_items
    RedeemReferralRequest:
      type: object
      properties:
        code:
          type: string
          minLength: 1
          description: The referral code to redeem.
      required:
      - code
    RefreshResponse:
      type: object
      properties:
        access_token:
          type: string
        user:
          $ref: '#/components/schemas/User'
      required:
      - access_token
      - user
    RefreshTokenRequest:
      type: object
      description: |-
        Request serializer for refreshing access tokens.
        Only refresh_token is required; user context is inferred server-side.
      properties:
        refresh_token:
          type: string
          minLength: 1
      required:
      - refresh_token
    StoreAnalytics:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/StoreItemSales'
        total_xp_spent:
          type: integer
      required:
      - items
      - total_xp_spent
    StoreItem:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 100
        description:
          type: string
        cost:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Cost in XP
        icon_name:
          type: string
          description: Lucide icon name or image path identifier
          maxLength: 50
        category:
          $ref: '#/components/schemas/StoreItemCategoryEnum'
        image:
          type: string
          nullable: true
          description: Path to image in public folder (e.g. /store/dracula.png)
          maxLength: 255
        item_data:
          description: JSON data for functional items (e.g., theme_key)
        is_owned:
          type: boolean
          readOnly: true
      required:
      - cost
      - icon_name
      - id
      - is_owned
      - name
    StoreItemCategoryEnum:
      enum:
      - THEME
      - FONT
      - EFFECT
      - VICTORY
      type: string
      description: |-
        * `THEME` - Theme
        * `FONT` - Font
        * `EFFECT` - Effect
        * `VICTORY` - Victory
    StoreItemRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        cost:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Cost in XP
        icon_name:
          type: string
          minLength: 1
          description: Lucide icon name or image path identifier
          maxLength: 50
        category:
          $ref: '#/components/schemas/StoreItemCategoryEnum'
        image:
          type: string
          nullable: true
          description: Path to image in public folder (e.g. /store/dracula.png)
          maxLength: 255
        item_data:
          description: JSON data for functional items (e.g., theme_key)
      required:
      - cost
      - icon_name
      - name
    StoreItemSales:
      type: object
      properties:
        name:
          type: string
        category:
          type: string
        cost:
          type: integer
        sales:
          type: integer
        revenue:
          type: integer
      required:
      - category
      - cost
      - name
      - revenue
      - sales
    SystemIntegrity:
      type: object
      properties:
        users:
          type: integer
        challenges:
          type: integer
        store_items:
          type: integer
        notifications:
          type: integer
        audit_logs:
          type: integer
      required:
      - audit_logs
      - challenges
      - notifications
      - store_items
      - users
    TaskResultsListResponse:
      type: object
      properties:
        count:
          type: integer
        results:
          type: array
          items:
            type: object
            additionalProperties: {}
      required:
      - count
      - results
    TaskStatusResponse:
      type: object
      properties:
        task_id:
          type: string
        status:
          type: string
        result:
          nullable: true
        traceback:
          type: string
          nullable: true
        date_done:
          type: string
          nullable: true
      required:
      - date_done
      - result
      - status
      - task_id
      - traceback
    UnequipItemRequestCategoryEnum:
      enum:
      - THEME
      - FONT
      - EFFECT
      - VICTORY
      type: string
      description: |-
        * `THEME` - THEME
        * `FONT` - FONT
        * `EFFECT` - EFFECT
        * `VICTORY` - VICTORY
    UnequipItemRequestRequest:
      type: object
      properties:
        category:
          $ref: '#/components/schemas/UnequipItemRequestCategoryEnum'
      required:
      - category
    User:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        profile:
          allOf:
          - $ref: '#/components/schemas/UserProfile'
          readOnly: true
        followers_count:
          type: integer
          readOnly: true
        following_count:
          type: integer
          readOnly: true
        is_staff:
          type: boolean
          title: Staff status
          description: Designates whether the user can log into this admin site.
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        is_active:
          type: boolean
          title: Active
          description: Designates whether this user should be treated as active. Unselect
            this instead of deleting accounts.
      required:
      - followers_count
      - following_count
      - id
      - profile
      - username
    UserBlockRequestRequest:
      type: object
      properties:
        reason:
          type: string
          minLength: 1
    UserCertificate:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        certificate_id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          readOnly: true
        issued_date:
          type: string
          format: date-time
          readOnly: true
        is_valid:
          type: boolean
        completion_count:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Number of challenges completed when certificate was issued
        verification_url:
          type: string
          readOnly: true
      required:
      - certificate_id
      - completion_count
      - id
      - issued_date
      - username
      - verification_url
    UserProfile:
      type: object
      properties:
        provider:
          allOf:
          - $ref: '#/components/schemas/ProviderEnum'
          description: |-
            The OAuth provider used to create this account.

            * `github` - GitHub
            * `google` - Google
            * `discord` - Discord
            * `email` - Email OTP
            * `local` - Local/Admin
        avatar_url:
          type: string
          format: uri
          readOnly: true
        banner_url:
          type: string
          format: uri
          readOnly: true
        bio:
          type: string
          nullable: true
          description: Short user biography.
          maxLength: 500
        xp:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Total Experience Points earned.
        referral_code:
          type: string
          nullable: true
          description: Unique code for inviting others.
          maxLength: 12
        is_referred:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        streak_freezes:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Number of streak freezes available.
        active_theme:
          type: string
          description: Active Monaco Editor theme.
          maxLength: 50
        active_font:
          type: string
          description: Active Editor Font Family.
          maxLength: 50
        active_effect:
          type: string
          nullable: true
          description: Active Cursor Effect (e.g., 'fire', 'particles').
          maxLength: 50
        active_victory:
          type: string
          description: Active Victory Animation.
          maxLength: 50
      required:
      - avatar_url
      - banner_url
      - created_at
      - is_referred
      - provider
    UserSummary:
      type: object
      properties:
        username:
          type: string
        avatar_url:
          type: string
          format: uri
          readOnly: true
        is_following:
          type: boolean
          readOnly: true
        bio:
          type: string
          readOnly: true
      required:
      - avatar_url
      - bio
      - is_following
      - username
    UserSummaryRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 1
      required:
      - username
    VerifyPaymentRequest:
      type: object
      properties:
        razorpay_order_id:
          type: string
          minLength: 1
          description: The order ID returned by Razorpay when the order was created.
        razorpay_payment_id:
          type: string
          minLength: 1
          description: The payment ID returned by Razorpay after a successful payment.
        razorpay_signature:
          type: string
          minLength: 1
          description: The signature returned by Razorpay to verify the payment authenticity.
      required:
      - razorpay_order_id
      - razorpay_payment_id
      - razorpay_signature
    VerifyPaymentResponse:
      type: object
      properties:
        status:
          type: string
        new_xp:
          type: integer
      required:
      - new_xp
      - status
  securitySchemes:
    JWTAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
